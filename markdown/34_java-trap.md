# 被禁锢的自由：Java 陷阱

> 自本文于 2004 年四月 12 日首次发表起，Sun 已经基于 GNU 通用公共许可证（GNU GPL）重授权了大部分 Java 平台参考实现，并且现在有了一个自由的 Java 开发环境。因此，Java 语言就此而言不再是一个陷阱。

> 然而，您必须小心，由于并非每一个 Java 平台都是自由的。Sun 继续分发非自由的可执行 Java 平台，并且其他商业公司也如此做。

> 自由的 Java 执行环境称为 IcedTea；Sun 所自由化的源代码包含于其中。因此这是您应该使用的。众多 GNU/Linux 发行版自带 IcedTea，但是某些发行版包括非自由 Java 平台。

> 为了可靠地保证您的 Java 程序在自由环境中运行良好，您需要使用 IcedTea 开发它们。从理论上说，Java 平台应该是兼容的，但是它们并非 100% 兼容。

> 此外，有些非自由软件在其名称中带有“Java”，诸如 JavaFX 等，并且有些非自由的 Java 包是您可能认为具有诱惑力但是需要拒绝的。因此，检查您所计划使用的任何包的许可证。如果您使用 Swing，确保使用其自由版本，它是 IcedTea 自带的。

> 除了这些 Java 细节以外，在此描述的一般问题仍然重要，由于任何非自由库或者编程平台可能导致类似的问题。我们必须通过 Java 的历史吸取教训，以便我们能够在未来避免其他陷阱。

如果您的程序是自由软件，它是基本上符合伦理的——但是有一个陷阱是您不得不防的。您的程序尽管就其本身而言是自由的，它可能被其所依赖的非自由软件限制。由于今天这一问题对于 Java 程序而言最为突出，我们称其为 Java 陷阱。

一个程序属于自由软件，如果它的用户拥有某些基本自由。粗略地说，它们包括：运行该程序的自由、研究并更改源代码的自由、再分发源代码和二进制文件的自由，以及发布改进版本的自由。（参见“自由软件的定义”一文。）任何以源代码形式给出的程序是否属于自由软件完全取决于它的许可证的涵义。

该程序能否被用于自由世界，被那些想要生活在自由中的人们所使用，是一个更加复杂的问题。这并不仅仅取决于该程序本身的许可证，由于没有任何程序是孤立工作的。每一个程序依赖于其他程序。例如，某个程序需要被编译或者解释，于是它依赖于编译器或者解释器。如果被编译为字节码，则它依赖于字节码解释器。更进一步地，它需要库以便能够运行，并且它可能还会调用那些运行于其他进程中的其他程序。所有这些都是依赖。依赖可能对于该程序到底能否运行是必要的，或者它们可能只是对于某些特性是必要的。无论如何，该程序的全部或者部分不能在没有这些依赖的情况下运作。

如果某个程序的某些依赖并非自由，这意味着该程序的全部或者部分不能运行于完全自由的系统之中——它在自由世界中不可用。确实，我们能够再分发该程序并且在我们的设备上拥有其副本，但是这并不会带来太多好处，如果它不能运行。该程序是自由软件，但是它事实上被其非自由的依赖禁锢了。

此类问题可能发生于任何类型的软件、任何编程语言之中。例如，某个只能运行于微软 Windows 的自由软件在自由世界中显然是无用的。但是，运行于 GNU/Linux 上的软件也可能是无用的，如果它依赖于其他非自由软件。在过去，Motif（直到我们拥有 LessTif）和 Qt（直到其开发者使其成为自由软件）是造成这一问题的主要原因。大多数三维显卡只能利用非自由的驱动程序完全工作，这也会导致此类问题。但是今天，此类问题的主要来源是 Java，由于编写自由软件的人们通常感到 Java 是诱人的。由于被该语言的吸引力所蒙蔽，他们忽视了依赖问题而落入 Java 陷阱。

Sun 的 Java 实现并非自由。Java 标准库也并非自由。我们确实拥有自由的 Java 实现，诸如 GNU Java 编译器（GCJ）和 GNU Classpath，但是它们尚不支持全部特性。我们仍在迎头赶上。

如果您在 Sun 的 Java 平台上开发 Java 程序，您有可能会用到仅限于 Sun 的特性而毫无察觉。当您发现这一点的时候，您可能已经使用它们长达数月之久，而重做此工作可能花费额外的好几个月。您可能会说，“从头再来将会花费太多工作。”于是您的程序将会落入 Java 陷阱；它将会在自由世界中不可用。

避免 Java 陷阱的可靠方式是在您的系统上仅仅拥有一种自由的 Java 实现。于是如果您使用了某种自由软件尚不支持的 Java 特性或者库，您将会立即发现，并且您可以立即重写代码。

Sun 持续开发额外的 Java “标准”库，并且它们几乎全都属于非自由的；在很多情况下，某个库的规范甚至是一种商业机密，并且 Sun 关于这些规范的许可证禁止发布少于该规范的完整实现的任何东西。（例如参见<https://jcp.org/aboutJava/communityprocess/JSPA2.pdf>和<https://jcp.org/aboutJava/communityprocess/final/jsr129/j2me_pb-1_0-fr-spec-license.html>。）

幸运的是，该规范许可证确实允许将某种实现发布为自由软件；收到该库的其他人被允许更改它，并且不被要求依附于该规范。但是，该要求具有禁止使用某种集体开发模型以生产该自由实现的效果。对于那种模型的使用将会涉及发布不完整版本，而这是那些阅读了该规范的人们所不被允许做的事情。

在自由软件运动的早期，避免依赖于非自由软件是不可能的。直到我们拥有 GNU C 编译器，每一个 C 语言程序（不论是否自由）都依赖非自由的 C 编译器。直到我们拥有 Linux，首个自由的内核，每一个程序都依赖非自由的内核。直到我们拥有 BASH，每一段 shell 脚本都必须由非自由的 shell 来解释。我们最早的程序一开始受到这些依赖的阻碍是不可避免的，但是我们接受了这一点，由于我们的计划包括接下来的拯救它们。我们的总体目标，一种自托管的 GNU 操作系统，包含了对于所有这些依赖的自由替代品；如果我们达到这一目标，我们的全部程序都将得到拯救。于是它发生了：有了 GNU/Linux 系统，我们现在可以在自由的平台上运行这些程序。

今天的形势有所不同。我们现在拥有了强大的自由操作系统和众多自由的编程工具。不论您想要执行任何任务，您都可以在自由的平台上执行它；无需接受非自由的依赖，哪怕只是暂时地。人们在今天落入这个陷阱的主要原因是他们并没有在思考它。这一问题的最简单的解决方法是教育人们认识它并且不要落入它。

为了保持您的 Java 代码不受 Java 陷阱的威胁，安装一种自由的 Java 开发环境并且使用它。更为一般地，不论您使用哪种编程语言，保持警惕并且检查您的代码所依赖的程序的自由状况。验证某个程序是否自由的最简单的方法是在自由软件目录（<https://fsf.org/directory>）中查找它。如果某个程序并不位于该目录中，您可以对照自由软件许可证列表（<https://gnu.org/licenses/license-list.html>）检查它的许可证。

我们正在试图拯救受困的 Java 程序，因此如果您喜欢 Java 语言，我们邀请您帮助开发 GNU Classpath。利用 GCJ 和 GNU Classpath 测试您的程序并且报告您所遇到的关于已实现的类的任何问题同样有用。然而，完成 GNU Classpath 将会需要时间；如果更多的非自由库持续被添加进来，我们可能永远不会拥有全部最新的库。因此请不要将您的自由软件置于枷锁之中。如果您在今天编写一个应用程序，从一开始就使得它能够运行在自由的工具上。

著作权所有 (C) 2004, 2006, 2010 Richard Stallman

本文最初于 2004 年发表于<https://gnu.org>。此版本是“自由软件，自由社会：Richard M. Stallman 文选”第二版（波士顿：GNU Press，2010）的一部分。

允许在世界范围内以任何介质对此完整章节进行逐字复制和分发而无需权利金，如果此通知被保留。

[返回目录](00_index.html)

